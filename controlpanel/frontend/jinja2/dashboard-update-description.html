{% extends "base.html" %}

{% set page_name = "dashboards" %}
{% set page_title = "Update description - " ~ dashboard.name %}
{% set back_link_url = dashboard.get_absolute_url() %}

{% block content %}

  {% if form.errors %}
    <div class="govuk-error-summary" data-module="govuk-error-summary">
      <div role="alert">
        <h2 class="govuk-error-summary__title">
          There is a problem
        </h2>
        <div class="govuk-error-summary__body">
          <ul class="govuk-list govuk-error-summary__list">
            {% for field, errors in form.errors.items() %}
              {% for error in errors %}
                <li>
                  <a href="#{{ field }}">{{ error }}</a>
                </li>
              {% endfor %}
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  {% endif %}

  <span class="govuk-caption-xl">{{ dashboard.name }}</span>
  <h1 class="govuk-heading-xl">Change description</h1>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <form method="post" action="{{ dashboard.get_absolute_change_description_url() }}" novalidate>
        {{ csrf_input }}
        <div class="govuk-form-group {% if form.description.errors %}govuk-form-group--error{% endif %}">
            <label class="govuk-label govuk-label--m" for="{{ form.description.id_for_label }}">
              Enter a description
            </label>
            <div id="description-hint" class="govuk-hint">
              Help others understand what your dashboard shows. Explain any acronyms or less common terms.
            </div>

            {% if form.description.errors %}
            <span id="description-error" class="govuk-error-message">
              <span class="govuk-visually-hidden">Error:</span> {{ form.description.errors.0 }}
            </span>
            {% endif %}

            {{form.description}}
          </div>

        <div class="govuk-button-group">
          <button class="govuk-button" data-module="govuk-button">Save</button>
          <a class="govuk-link" href="{{ back_link_url }}">Cancel</a>
        </div>
      </form>
  </div>

{% endblock %}
