{% from "error-message/macro.html" import govukErrorMessage %}
{% from "input/macro.html" import govukInput %}
{% from "label/macro.html" import govukLabel %}


{% extends "base.html" %}

{% set page_title = "Share a dashboard" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-xl">{{ page_title }}</h1>

    <form method="post" id="register_app" action="{{ url("register-dashboard") }}">
      {{ csrf_input }}

      <div class="govuk-form-group" id="container-element">

        <label class="govuk-label govuk-label--s" for="name">Choose dashboard
        </label>
        <div id="name-hint" class="govuk-hint">
          Start typing the name of your dashboard as it appears in QuickSight.
        </div>


        {% set error_name_msg = form.errors.get("name") %}
        {% if error_name_msg %}
          {% set errorId = 'name-error' %}
          {{ govukErrorMessage({
            "id": errorId,
            "html": error_name_msg|join(". "),
          }) }}
        {% endif %}

        <input type="text" class="govuk-input" id="name" name="name" {% if form.name.value() %} value="{{ form.name.value() }}" {% endif %} required />

      </div>
      <div class="govuk-form-group" id="container-element">

        <label class="govuk-label govuk-label--s" for="description">Enter a description
        </label>
        <div id="description-hint" class="govuk-hint">
          Help people understand what your dashboard shows. Explain any acronyms or less common terms.
        </div>

        {% set error_qsid_msg = form.errors.get("description") %}
        {% if error_qsid_msg %}
          {% set errorId = 'qsid-error' %}
          {{ govukErrorMessage({
            "id": errorId,
            "html": error_qsid_msg|join(". "),
          }) }}
        {% endif %}

        <textarea type="text" class="govuk-textarea" id="description" name="description" rows="5" aria-describedby="description-hint" {% if form.description.value() %} value="{{ form.description.value() }}" {% endif %}></textarea>

      </div>


      <div class="govuk-form-group">
        <button class="govuk-button">Register dashboard</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
